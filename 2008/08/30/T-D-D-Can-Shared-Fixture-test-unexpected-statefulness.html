<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>TDD : Can Shared Fixture test unexpected statefulness ?</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="TDD : Can Shared Fixture test unexpected statefulness ?">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="TDD : Can Shared Fixture test unexpected statefulness ?">
    <meta property="og:description" content="">

    <!-- <meta name="twitter:site" content="">

<meta name="twitter:creator" content="">

<meta name="google-site-verification" content="">

<meta property="fb:admins" content="">
 -->

    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="/apple-touch-icon-precomposed.png" rel="apple-touch-icon">

    <link href="//fonts.googleapis.com/" rel="dns-prefetch">
    <link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Open+Sans:700,400&subset=latin,latin-ext" rel="stylesheet">

    <link rel="stylesheet" href="//sgalles.github.io/themes/ghostium/assets/css/main.min.css?v=1.0.0"/>
    <link rel="stylesheet" href="//sgalles.github.io/themes/ghostium/assets/css/custom.css?v=1.0.0"/>
    <link rel="stylesheet" href="//sgalles.github.io/themes/ghostium/assets/css/asciidoctor-foundation.css?v=1.0.0"/>




    <script type="text/javascript">
      var ga_ua = 'UA-XXXXX-X';
      
      var disqus_shortname = 'example';
      
      var enable_pjax = true;

      // Pace Options
      // ==============
      window.paceOptions = {
        catchupTime: 100,
        minTime: 100,
        elements: false,
        restartOnRequestAfter: 500,
        startOnPageLoad: false
      }

      // Ghostium Globals
      // ==============
      window.GHOSTIUM = {};
      GHOSTIUM.haveGA = typeof ga_ua !== 'undefined' && ga_ua !== 'UA-XXXXX-X';
      GHOSTIUM.haveDisqus = typeof disqus_shortname !== 'undefined' && disqus_shortname !== 'example';
      GHOSTIUM.enablePjax = typeof enable_pjax !== 'undefined' ? enable_pjax : true;
    </script>

    <script src="//sgalles.github.io/themes/ghostium/assets/js/head-scripts.min.js?v=1.0.0"></script>

    <link rel="canonical" href="https://sgalles.github.io/2008/08/30/T-D-D-Can-Shared-Fixture-test-unexpected-statefulness.html" />
    
    <meta property="og:site_name" content="void   techBlog()   { //... }" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="TDD : Can Shared Fixture test unexpected statefulness ?" />
    <meta property="og:description" content="When praticing TDD, the impact of the different types of fixture that can be used to setup the tests must be known in order to avoid to create Obscure Tests The usual default fixture type is the Fresh Fixture When..." />
    <meta property="og:url" content="https://sgalles.github.io/2008/08/30/T-D-D-Can-Shared-Fixture-test-unexpected-statefulness.html" />
    <meta property="article:published_time" content="2008-08-29T22:00:00.000Z" />
    <meta property="article:modified_time" content="2016-05-25T12:32:31.773Z" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="TDD : Can Shared Fixture test unexpected statefulness ?" />
    <meta name="twitter:description" content="When praticing TDD, the impact of the different types of fixture that can be used to setup the tests must be known in order to avoid to create Obscure Tests The usual default fixture type is the Fresh Fixture When..." />
    <meta name="twitter:url" content="https://sgalles.github.io/2008/08/30/T-D-D-Can-Shared-Fixture-test-unexpected-statefulness.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "void   techBlog()   { //... }",
    "author": {
        "@type": "Person",
        "name": "Stephane Gallès",
        "image": "https://avatars.githubusercontent.com/u/153065?v=3",
        "url": "undefined/author/undefined",
        "sameAs": "https://plus.google.com/108710960409593252381"
    },
    "headline": "TDD : Can Shared Fixture test unexpected statefulness ?",
    "url": "https://sgalles.github.io/2008/08/30/T-D-D-Can-Shared-Fixture-test-unexpected-statefulness.html",
    "datePublished": "2008-08-29T22:00:00.000Z",
    "dateModified": "2016-05-25T12:32:31.773Z",
    "description": "When praticing TDD, the impact of the different types of fixture that can be used to setup the tests must be known in order to avoid to create Obscure Tests The usual default fixture type is the Fresh Fixture When..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="void   techBlog()   { //... }" href="https://sgalles.github.io/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
  </head>
  <body class="post-template">

    <button data-action="open-drawer" id="drawer-button" class="drawer-button"><i class="fa fa-bars"></i></button>
    <nav tabindex="-1" class="drawer">
      <div class="drawer-container">
        <!--.drawer-search(role="search")-->
        <ul role="navigation" class="drawer-list">
          
          <li class="drawer-list-item">
            <a href="https://sgalles.github.io" data-pjax>
              <i class="fa fa-home"></i>Home
            </a>
          </li>
          <!-- <li class="drawer-list-item">
            <a href="https://sgalles.github.io" title="void   techBlog()   { //... }" data-pjax>
              <i class="fa fa-list-alt"></i>All posts
            </a>
          </li> -->
          <!--
          <li class="drawer-list-item">
            <a href="https://sgalles.github.io/rss/">
              <i class="fa fa-rss"></i>Subscribe to Feed
            </a>
          </li>
          -->
          <li class="drawer-list-divider"></li>
          <li class="drawer-list-item drawer-list-title">
            Follow me
          </li>
          
          
          <li class="drawer-list-item">
            <a href="https://github.com/sgalles" title="Github" target="_blank">
              <i class="fa fa-github"></i>Github
            </a>
          </li>
          <li class="drawer-list-item">
            <a href="https://plus.google.com/108710960409593252381" title="Google+" target="_blank">
              <i class="fa fa-google-plus"></i>Google+
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="drawer-overlay"></div>
    <main id="container" role="main" class="container">
      <div class="surface">
        <div class="surface-container">
          <div data-pjax-container class="content">
            
<section class="wrapper wrapper-post">
  <div class="wrapper-container">
    <article itemscope itemtype="http://schema.org/BlogPosting" role="article" class="post post">
        <section class="post-container">
          <header class="post-header">
            <ul class="post-meta-list">
              <li class="post-meta-item">
                <time datetime="2008-08-30" itemprop="datePublished">
                  2008-08-30 00:00:00<ago class="ago">
                </time>
              </li>
              <li class="post-meta-item">
                <a href="#disqus_thread" data-disqus-identifier="cd6b0edd-5a26-451d-b927-715a2d0db060">Comments</a>
              </li>
            </ul>
            <h1 itemprop="name headline" class="post-title"><a href="/2008/08/30/T-D-D-Can-Shared-Fixture-test-unexpected-statefulness.html" itemprop="url" data-pjax title="TDD : Can Shared Fixture test unexpected statefulness ?">TDD : Can Shared Fixture test unexpected statefulness ?</a></h1>
            <!--h2 itemprop="about" class="post-subtitle"></h2-->
          </header>
          <aside class="post-side">
            <div class="post-author">
                <a href="https://plus.google.com/108710960409593252381" class="post-author-avatar">
                  <img src="https://avatars.githubusercontent.com/u/153065?v=3" alt="Stephane Gallès">
                </a>
              <div class="post-author-info">
                <a href="https://plus.google.com/108710960409593252381" class="post-author-name">
                  Stephane Gallès
                </a>
                <p class="post-author-bio"></p>
              </div>
            </div>
          </aside>
          <div itemprop="articleBody" class="post-body">
            <div class="paragraph">
<p>When praticing TDD, the impact of the different types of fixture that can be used to setup the tests must be known in order to avoid to create <a href="http://xunitpatterns.com/Obscure%20Test.html">Obscure Tests</a></p>
</div>
<div class="paragraph">
<p>The usual default fixture type is the <a href="http://xunitpatterns.com/Fresh%20Fixture.html">Fresh Fixture</a></p>
</div>
<div class="paragraph">
<p>When the fresh fixture takes too much time a <a href="http://xunitpatterns.com/Shared%20Fixture.html">Shared Fixture</a> can be used. Now, that being said, the shared fixture should usually be avoided (there&#8217;s a risk of <a href="http://xunitpatterns.com/Erratic%20Test.html">Erratic Test</a>)</p>
</div>
<div class="paragraph">
<p>A few days ago, during a discussion about test fixture, some colleagues of mine and I were wondering if shared fixture could be used in order to test the statelessness of the objects used in the fixture as a side effect of the sharing.</p>
</div>
<div class="paragraph">
<p>Here is the initial reasoning : when an object is supposed to be stateless, but is buggy and not actually stateless , the use of this object will lead to some failing test, since the state left by some tests will make some subsequent tests fail. The statelessness is tested "for free" with a lot of different combination. Actually, if the object happens to be stateful it is a case of <a href="http://xunitpatterns.com/Erratic%20Test.html#Interacting%20Tests">Interacting Tests</a> and the reason why some tests fail could be quite hard to find.</p>
</div>
<div class="paragraph">
<p>I must admit that it may help to find some obscure statefulness interaction, but I do not really like this idea :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>I fear <a href="http://xunitpatterns.com/Erratic%20Test.html#Interacting%20Tests">Interacting Tests</a> far more than a single bug, as <a href="http://xunitpatterns.com/Erratic%20Test.html#Interacting%20Tests">Interacting Tests</a> in a test suite is hell on earth,</p>
</li>
<li>
<p>A test is supposed to have <a href="http://blog.jayfields.com/2007/06/testing-one-assertion-per-test.html">One Assertion Per Test</a>. Or, at most a few assertions. In this case, the statefulness test is spread in the whole test class.
Actually, the statefulness should be tested in its own test. Of course it means that only a few method call combination will be tested but it should be enough to prove the statelessness (or else it means that the code of the class under test must be refactored in order to make the stalessness explicit in the code structure)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To try to use the side effect of the shared fixture to test statelessness may seem to be worthwhile at first, but it creates <a href="http://www.martinfowler.com/bliki/TechnicalDebt.html">Technical Debt</a>. And in this case I think that the financial interest of the debt is pretty high.</p>
</div>
          </div>
          <footer class="post-footer">
            <div itemprop="author" itemscope itemtype="http://schema.org/Person" class="post-author">
                <a href="https://plus.google.com/108710960409593252381" class="post-author-avatar">
                  <img itemprop="image" src="https://avatars.githubusercontent.com/u/153065?v=3" alt="Stephane Gallès">
                </a>
              <div class="post-author-info">
                <h4 class="post-footer-heading">Written By</h4>
                <a href="https://plus.google.com/108710960409593252381" itemprop="url" class="post-author-name">
                  <span itemprop="name">Stephane Gallès</span>
                </a>
                <p itemprop="description" class="post-author-bio"></p>
                  <p class="post-author-website">
                    <a href="https://plus.google.com/108710960409593252381" rel="nofollow">https://plus.google.com/108710960409593252381</a>
                  </p>
                <p class="post-info">
                  <b class="post-info-title">Published on</b>
                  <time class="post-date">August 30, 2008</time>
                </p>
              </div>
            </div>
            <div class="post-social">
              <h4 class="post-footer-heading">Spread the word</h4>
              <a href="#" data-action="share-twitter"><i class="fa fa-fw fa-lg fa-twitter"></i></a>
              <a href="#" data-action="share-facebook"><i class="fa fa-fw fa-lg fa-facebook"></i></a>
              <a href="#" data-action="share-gplus"><i class="fa fa-fw fa-lg fa-google-plus"></i></a>
            </div>
          </footer>
        </section>
      <section itemprop="comment" class="post-comments">
        <div id="disqus_thread"></div>
      </section>
    </article>

    <footer role="contentinfo" class="footer">
      <p><small>Copyright &copy; <span itemprop="copyrightHolder">void   techBlog()   { //... }</span>. 2016. All Rights Reserved.</small></p>
      <p><small><a href="http://ghostium.oswaldoacauan.com/" target="_blank">Ghostium Theme</a> by <a href="http://twitter.com/oswaldoacauan" target="_blank">@oswaldoacauan</a></small></p>
      <p><small>Adapted by <a href="https://twitter.com/mgreau">Maxime Gréau</a></small></p>
      <p><small>Published with <a href="http://hubpress.io">HubPress</a></small></p>
    </footer>
  </div>
</section>


          </div>
        </div>
      </div>
    </main>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>

    <script src="//sgalles.github.io/themes/ghostium/assets/js/foot-scripts.min.js?v=1.0.0"></script>


  </body>
</html>
