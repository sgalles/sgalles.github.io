<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>&quot;Unit Integrated Tests&quot; for integrator objects</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="//sgalles.github.io/themes/Casper/favicon.ico">

    <link rel="stylesheet" type="text/css" href="//sgalles.github.io/themes/Casper/assets/css/screen.css?v=1.0.0" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />

    <link rel="canonical" href="https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html" />
    
    <meta property="og:site_name" content="void   techBlog()   { world.forEach(person -&gt; say( &quot;Hello &quot; + person )); }" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="&quot;Unit Integrated Tests&quot; for integrator objects" />
    <meta property="og:description" content="Whether I use interaction based testing or state based testing I usually write &quot;real&quot; unit tests in the sense that only one real object is involved (the SUT, System Under Test) and only stubs and mocks are used for the..." />
    <meta property="og:url" content="https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html" />
    <meta property="article:published_time" content="2008-02-22T23:00:00.000Z" />
    <meta property="article:modified_time" content="2016-05-25T05:55:45.308Z" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="&quot;Unit Integrated Tests&quot; for integrator objects" />
    <meta name="twitter:description" content="Whether I use interaction based testing or state based testing I usually write &quot;real&quot; unit tests in the sense that only one real object is involved (the SUT, System Under Test) and only stubs and mocks are used for the..." />
    <meta name="twitter:url" content="https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "void   techBlog()   { world.forEach(person -&gt; say( &quot;Hello &quot; + person )); }",
    "author": {
        "@type": "Person",
        "name": "Stephane Gallès",
        "image": "https://avatars.githubusercontent.com/u/153065?v=3",
        "url": "undefined/author/undefined",
        "sameAs": "https://plus.google.com/108710960409593252381"
    },
    "headline": "&quot;Unit Integrated Tests&quot; for integrator objects",
    "url": "https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html",
    "datePublished": "2008-02-22T23:00:00.000Z",
    "dateModified": "2016-05-25T05:55:45.308Z",
    "description": "Whether I use interaction based testing or state based testing I usually write &quot;real&quot; unit tests in the sense that only one real object is involved (the SUT, System Under Test) and only stubs and mocks are used for the..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="void   techBlog()   { world.forEach(person -&gt; say( &quot;Hello &quot; + person )); }" href="https://sgalles.github.io/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
</head>
<body class="post-template">

    


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="https://sgalles.github.io">Home</a>
        <!-- <a class="subscribe-button icon-feed" href="https://sgalles.github.io/rss/">Subscribe</a> -->
    </nav>
</header>

<main class="content" role="main">

    <article class="post">

        <header class="post-header">
            <h1 class="post-title">&quot;Unit Integrated Tests&quot; for integrator objects</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2008-02-23">23 February 2008</time> 
            </section>
        </header>

        <section class="post-content">
            <div class="paragraph">
<p>Whether I use interaction based testing or state based testing I usually write "real" unit tests in the sense that only one real object is involved (the SUT, System Under Test) and only stubs and mocks are used for the fixture. It usually is the only way to easily get a good code coverage (or at least to easily specifically cover some parts of the code )</p>
</div>
<div class="paragraph">
<p>However, Lately, when testing Facade or Adapter objects he seemed to me that the unit tests for these objects were :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>too complicated</p>
</li>
<li>
<p>too&#8230;&#8203;useless</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For most Facade or Adapter objects :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>They&#8217;re stateless, so let&#8217;s forget state based testing, we must use mocks</p>
</li>
<li>
<p>They&#8217;re highly coupled to the contract of the adapted objects (by definition of a Facade or of an Adapter)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This kind of class does nothing clever, they basically chain one or multiples calls. They may have bug though if they do not respect the contracts of the adapted classes.</p>
</div>
<div class="paragraph">
<p>So a unit test for this kind of class depends more on the contract of the mocked objects, than on the behavior of the class under test. A very clear test smell.</p>
</div>
<div class="paragraph">
<p>Even worse, the fixtures for the mocks are going to closely mimick the code of the SUT (if a method of a Facade calls an object A and then an object B, the fixture for the test on mocks and stubs will tell the exact same thing).</p>
</div>
<div class="paragraph">
<p>In this specific case the unit test does not provide an orthogonal view of the behavior implemented by the code (the usual value of a unit test) ; it is the exact same view. If I make a wrong assumption on the contract of the adapted objects, I&#8217;m going to make the same exact mistake both in the test and then in the code (TDDly speaking)</p>
</div>
<div class="paragraph">
<p>The problem basically is that the job of this kind of objects is to integrate other objects in the system. So he seemed to me that it is very hard to try to test an integration behavior in isolation.</p>
</div>
<div class="paragraph">
<p>That&#8217;s why, now, when I must deal with objects that heavily depend on the contract of the collaborating objects but do not do anything complicated, "integrator objects", I use integrated tests.</p>
</div>
<div class="paragraph">
<p>However when I encounter an object that heavily depend on the contract of the collaborating objects and does many complicated things, it just means that it is too hard to test, I refactor.</p>
</div>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="" style="background-image: url(https://avatars.githubusercontent.com/u/153065?v=3)"><span class="hidden">Stephane Gallès's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="">Stephane Gallès</a></h4>

                    <p>Read <a href="">more posts</a> by this author.</p>
                <div class="author-meta">
                    
                    <span class="author-link icon-link"><a href="https://plus.google.com/108710960409593252381">https://plus.google.com/108710960409593252381</a></span>
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/share?text=%22Unit%20Integrated%20Tests%22%20for%20integrator%20objects&amp;url=https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>


    </article>

</main>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="https://sgalles.github.io">void   techBlog()   { world.forEach(person -&gt; say( &quot;Hello &quot; + person )); }</a> &copy; 2016</section>
        <section class="poweredby">Proudly published with <a href="http://hubpress.io">HubPress</a></section>
    </footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>

    <script type="text/javascript" src="//sgalles.github.io/themes/Casper/assets/js/jquery.fitvids.js?v=1.0.0"></script>
    <script type="text/javascript" src="//sgalles.github.io/themes/Casper/assets/js/index.js?v=1.0.0"></script>

</body>
</html>
