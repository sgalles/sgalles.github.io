<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>&quot;Unit Integrated Tests&quot; for integrator objects</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="//sgalles.github.io/themes/Roon/favicon.ico">

    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:400,700,400italic,700italic|Open+Sans:400italic,700italic,700,400">
    <link rel="stylesheet" type="text/css" href="//sgalles.github.io/themes/Roon/assets/css/screen.css?v=1.0.0" />

    <link rel="canonical" href="https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html" />
    
    <meta property="og:site_name" content="void   techBlog()   { world.forEach(person -&gt; say( &quot;Hello &quot; + person )); }" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="&quot;Unit Integrated Tests&quot; for integrator objects" />
    <meta property="og:description" content="Whether I use interaction based testing or state based testing I usually write &quot;real&quot; unit tests in the sense that only one real object is involved (the SUT, System Under Test) and only stubs and mocks are used for the..." />
    <meta property="og:url" content="https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html" />
    <meta property="article:published_time" content="2008-02-22T23:00:00.000Z" />
    <meta property="article:modified_time" content="2016-05-25T06:01:56.640Z" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="&quot;Unit Integrated Tests&quot; for integrator objects" />
    <meta name="twitter:description" content="Whether I use interaction based testing or state based testing I usually write &quot;real&quot; unit tests in the sense that only one real object is involved (the SUT, System Under Test) and only stubs and mocks are used for the..." />
    <meta name="twitter:url" content="https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "void   techBlog()   { world.forEach(person -&gt; say( &quot;Hello &quot; + person )); }",
    "author": {
        "@type": "Person",
        "name": "Stephane Gallès",
        "image": "https://avatars.githubusercontent.com/u/153065?v=3",
        "url": "undefined/author/undefined",
        "sameAs": "https://plus.google.com/108710960409593252381"
    },
    "headline": "&quot;Unit Integrated Tests&quot; for integrator objects",
    "url": "https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html",
    "datePublished": "2008-02-22T23:00:00.000Z",
    "dateModified": "2016-05-25T06:01:56.640Z",
    "description": "Whether I use interaction based testing or state based testing I usually write &quot;real&quot; unit tests in the sense that only one real object is involved (the SUT, System Under Test) and only stubs and mocks are used for the..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="void   techBlog()   { world.forEach(person -&gt; say( &quot;Hello &quot; + person )); }" href="https://sgalles.github.io/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
</head>
<body class="post-template  noimage">

    


    <article role="main" class="">
        <header>
            <a href="https://sgalles.github.io" id="home_link">«</a>
            <div class="meta"><time datetime="2008-02-23"><a href="/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html">February 23, 2008</a></time> <span class="count" id="js-reading-time"></span></div>
            <h1>&quot;Unit Integrated Tests&quot; for integrator objects</h1>
        </header>

        <div class="text" id="js-post-content">
            <div class="paragraph">
<p>Whether I use interaction based testing or state based testing I usually write "real" unit tests in the sense that only one real object is involved (the SUT, System Under Test) and only stubs and mocks are used for the fixture. It usually is the only way to easily get a good code coverage (or at least to easily specifically cover some parts of the code )</p>
</div>
<div class="paragraph">
<p>However, Lately, when testing Facade or Adapter objects he seemed to me that the unit tests for these objects were :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>too complicated</p>
</li>
<li>
<p>too&#8230;&#8203;useless</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For most Facade or Adapter objects :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>They&#8217;re stateless, so let&#8217;s forget state based testing, we must use mocks</p>
</li>
<li>
<p>They&#8217;re highly coupled to the contract of the adapted objects (by definition of a Facade or of an Adapter)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This kind of class does nothing clever, they basically chain one or multiples calls. They may have bug though if they do not respect the contracts of the adapted classes.</p>
</div>
<div class="paragraph">
<p>So a unit test for this kind of class depends more on the contract of the mocked objects, than on the behavior of the class under test. A very clear test smell.</p>
</div>
<div class="paragraph">
<p>Even worse, the fixtures for the mocks are going to closely mimick the code of the SUT (if a method of a Facade calls an object A and then an object B, the fixture for the test on mocks and stubs will tell the exact same thing).</p>
</div>
<div class="paragraph">
<p>In this specific case the unit test does not provide an orthogonal view of the behavior implemented by the code (the usual value of a unit test) ; it is the exact same view. If I make a wrong assumption on the contract of the adapted objects, I&#8217;m going to make the same exact mistake both in the test and then in the code (TDDly speaking)</p>
</div>
<div class="paragraph">
<p>The problem basically is that the job of this kind of objects is to integrate other objects in the system. So he seemed to me that it is very hard to try to test an integration behavior in isolation.</p>
</div>
<div class="paragraph">
<p>That&#8217;s why, now, when I must deal with objects that heavily depend on the contract of the collaborating objects but do not do anything complicated, "integrator objects", I use integrated tests.</p>
</div>
<div class="paragraph">
<p>However when I encounter an object that heavily depend on the contract of the collaborating objects and does many complicated things, it just means that it is too hard to test, I refactor.</p>
</div>
        </div>

        <menu>
            <a href="" id="btn_share" class="btn" title="Share">
                <span aria-hidden="true" data-icon="S"></span>
                <strong>Share</strong>
            </a>
            <a href="http://twitter.com/share?text=%22Unit%20Integrated%20Tests%22%20for%20integrator%20objects&url=https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" id="btn_comment" class="btn" target="_blank">
                <span aria-hidden="true" data-icon="C"></span> Comment on Twitter
            </a>
        </menu>


        <footer class="post-footer" role="contentinfo">

            <div class="vcard">
                <!-- <a href="https://sgalles.github.io/rss" id="btn_feed" class="btn" title="Feed" target="_blank">
                    <span aria-hidden="true" data-icon=")"></span>
                    <strong>Feed</strong>
                </a> -->

                <a href="" class="photo">
                    <span style="background-image: url('https://avatars.githubusercontent.com/u/153065?v=3');">
                        <img src="https://avatars.githubusercontent.com/u/153065?v=3" alt="Stephane Gallès">
                    </span>
                </a>

                <div class="details">
                    <h4><a href="" class="url n">Stephane Gallès</a></h4>
                    
                    <a href="https://plus.google.com/108710960409593252381" class="js-remove-domain-schema">https://plus.google.com/108710960409593252381</a>
                </div>
            </div>

            <div id="user_bio">
                <div class="inner">
                    
                </div>
            </div>

        </footer>




    </article>

    <div id="share_modal">
        <div class="wrap">
            <div class="inner">
                <header>
                    Share
                    <a href="" class="close" title="Close">&times;</a>
                </header>

                <div class="roon-share-links">
                    <a href="https://twitter.com/share" class="twitter-share-button" data-dnt="true">Tweet</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

                    <div id="fb-elems">
                        <div id="fb-root"></div>
                        <script>(function(d, s, id) {
                        var js, fjs = d.getElementsByTagName(s)[0];
                        if (d.getElementById(id)) return;
                        js = d.createElement(s); js.id = id;
                        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=463438580397968";
                        fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));</script>
                        <div class="fb-like" data-send="false" data-layout="button_count" data-width="110" data-show-faces="false" data-font="arial"></div>
                    </div>

                    <div id="pinit-btn">
                        <a href="//pinterest.com/pin/create/button/?url=https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html&amp;description=%22Unit%20Integrated%20Tests%22%20for%20integrator%20objects-void%20%20%20techBlog()%20%20%20%7B%20world.forEach(person%20-%3E%20say(%20%22Hello%20%22%20%2B%20person%20))%3B%20%7D " data-pin-do="buttonPin" data-pin-config="beside"><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png"></a>
                        <script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script>
                    </div>
                </div>
            </div>
        </div>
    </div>






    <script>

            function get_text(el) {
                ret = "";
                var length = el.childNodes.length;
                for(var i = 0; i < length; i++) {
                    var node = el.childNodes[i];
                    if(node.nodeType != 8) {
                        ret += node.nodeType != 1 ? node.nodeValue : get_text(node);
                    }
                }
                return ret;
            }
            function reading_time () {
                var post_content = document.getElementById('js-post-content');
                if (post_content) {
                    var words = get_text(post_content),
                        count = words.split(/\s+/).length,
                        read_time = Math.ceil((count / 150)),
                        read_time_node = document.createTextNode(read_time + ' min read');
                    document.getElementById('js-reading-time').appendChild(read_time_node);
                }
            }

        function no_schema_links () {
            var links = document.querySelectorAll('.js-remove-domain-schema');
            if (links) {
                for (i = 0; i < links.length; ++i) {
                    var link = links[i],
                        text = link.innerHTML,
                        no_schema = text.replace(/.*?:\/\//g, "");
                    link.innerHTML = no_schema;
                }
            }
        }

        window.onload = function () {
            no_schema_links();

            reading_time();
        }
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>

        <script>
            $(function(){
                var share_modal = $("#share_modal"),
                    update_social_links = true;

                $("#btn_share").click(function(){
                    var that = $(this);
                    share_modal.fadeIn(200);
                    return false;
                });

                share_modal.click(function(e){
                    if (e.target.className == "wrap" || e.target.id == "share_modal") {
                        share_modal.fadeOut(200);
                    }
                    return false;
                });

                share_modal.find("div.inner > header > a.close").click(function(){
                    share_modal.fadeOut(200);
                    return false;
                });
            });
        </script>



</body>
</html>
