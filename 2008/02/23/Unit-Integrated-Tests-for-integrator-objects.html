<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>&quot;Unit Integrated Tests&quot; for integrator objects</title>
    <meta name="description" content="" />
    <link href="//fonts.googleapis.com/css?family=Noto+Sans:300,400,700" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic" rel="stylesheet" type="text/css">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link href="//sgalles.github.io/themes/Saga/assets/css/style.css?v=1.0.0" rel="stylesheet" type="text/css">
    <link href="//sgalles.github.io/themes/Saga/assets/css/animate.min.css?v=1.0.0" rel="stylesheet" type="text/css">
    <link href="//sgalles.github.io/themes/Saga/favicon.ico" rel="shortcut icon">
    <link rel="canonical" href="https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html" />
    
    <meta property="og:site_name" content="void   techBlog()   { //... }" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="&quot;Unit Integrated Tests&quot; for integrator objects" />
    <meta property="og:description" content="Whether I use interaction based testing or state based testing I usually write &quot;real&quot; unit tests in the sense that only one real object is involved (the SUT, System Under Test) and only stubs and mocks are used for the..." />
    <meta property="og:url" content="https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html" />
    <meta property="article:published_time" content="2008-02-22T23:00:00.000Z" />
    <meta property="article:modified_time" content="2016-07-11T19:12:44.290Z" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="&quot;Unit Integrated Tests&quot; for integrator objects" />
    <meta name="twitter:description" content="Whether I use interaction based testing or state based testing I usually write &quot;real&quot; unit tests in the sense that only one real object is involved (the SUT, System Under Test) and only stubs and mocks are used for the..." />
    <meta name="twitter:url" content="https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "void   techBlog()   { //... }",
    "author": {
        "@type": "Person",
        "name": "Stephane Gallès",
        "image": "https://avatars.githubusercontent.com/u/153065?v=3",
        "url": "undefined/author/undefined",
        "sameAs": "http://sgalles.github.io/"
    },
    "headline": "&quot;Unit Integrated Tests&quot; for integrator objects",
    "url": "https://sgalles.github.io/2008/02/23/Unit-Integrated-Tests-for-integrator-objects.html",
    "datePublished": "2008-02-22T23:00:00.000Z",
    "dateModified": "2016-07-11T19:12:44.290Z",
    "description": "Whether I use interaction based testing or state based testing I usually write &quot;real&quot; unit tests in the sense that only one real object is involved (the SUT, System Under Test) and only stubs and mocks are used for the..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="void   techBlog()   { //... }" href="https://sgalles.github.io/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
</head>
<body class="post-template">
    <header id="header" class="animated fadeIn">
    <div class="header-background">
    <section class="blog-content">
        <a id="site-url" class="blog-title" href="https://sgalles.github.io">void   techBlog()   { //... }</a>
        <span class="blog-description">My attemps to arrange 0 and 1 and make something vaguely useful</span>
        <nav class="links fadeIn animated">
            <ul>
                <!-- <li class="rss"><a title="RSS Feed" href="/rss/"><i class="fa fa-fw fa-rss-square"></i></a></li> -->
        
            </ul>
        </nav>
    </section>
    <section class="header-content">
        <h1 class="post-title animated fadeInUp">&quot;Unit Integrated Tests&quot; for integrator objects</h1>
        <span class="post-data"><span class="date animated fadeInUp"><i class="fa fa-clock-o"></i> <time class="timesince date" data-timesince="1203721200" datetime="2008-02-23T00:00" title="23 February 2008">2008-02-23 00:00:00<ago class="ago"></time></span>
            
            <span class="author animated fadeInUp"><i class="fa fa-user"></i> <a href="">Stephane Gallès</a></span></span>
    </section>
    </div>
</header>
<main id="main" class="content">
    <article itemtype="http://schema.org/BlogPosting" class="animated fadeIn content post post">
        <section class="post-content">
            <div class="paragraph">
<p>Whether I use interaction based testing or state based testing I usually write "real" unit tests in the sense that only one real object is involved (the SUT, System Under Test) and only stubs and mocks are used for the fixture. It usually is the only way to easily get a good code coverage (or at least to easily specifically cover some parts of the code )</p>
</div>
<div class="paragraph">
<p>However, Lately, when testing Facade or Adapter objects he seemed to me that the unit tests for these objects were :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>too complicated</p>
</li>
<li>
<p>too&#8230;&#8203;useless</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For most Facade or Adapter objects :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>They&#8217;re stateless, so let&#8217;s forget state based testing, we must use mocks</p>
</li>
<li>
<p>They&#8217;re highly coupled to the contract of the adapted objects (by definition of a Facade or of an Adapter)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This kind of class does nothing clever, they basically chain one or multiples calls. They may have bug though if they do not respect the contracts of the adapted classes.</p>
</div>
<div class="paragraph">
<p>So a unit test for this kind of class depends more on the contract of the mocked objects, than on the behavior of the class under test. A very clear test smell.</p>
</div>
<div class="paragraph">
<p>Even worse, the fixtures for the mocks are going to closely mimick the code of the SUT (if a method of a Facade calls an object A and then an object B, the fixture for the test on mocks and stubs will tell the exact same thing).</p>
</div>
<div class="paragraph">
<p>In this specific case the unit test does not provide an orthogonal view of the behavior implemented by the code (the usual value of a unit test) ; it is the exact same view. If I make a wrong assumption on the contract of the adapted objects, I&#8217;m going to make the same exact mistake both in the test and then in the code (TDDly speaking)</p>
</div>
<div class="paragraph">
<p>The problem basically is that the job of this kind of objects is to integrate other objects in the system. So he seemed to me that it is very hard to try to test an integration behavior in isolation.</p>
</div>
<div class="paragraph">
<p>That&#8217;s why, now, when I must deal with objects that heavily depend on the contract of the collaborating objects but do not do anything complicated, "integrator objects", I use integrated tests.</p>
</div>
<div class="paragraph">
<p>However when I encounter an object that heavily depend on the contract of the collaborating objects and does many complicated things, it just means that it is too hard to test, I refactor.</p>
</div>
        </section>

    
        <section class="post-comments">
          <div id="disqus_thread"></div>
          <script type="text/javascript">
          var disqus_shortname = 'voidtechblog'; // required: replace example with your forum shortname
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </section>
    
    </article>

</main>
    <footer class="animated fadeIn" id="footer">
        <section class="colophon">
          <section class="copyright">Copyright &copy; <span itemprop="copyrightHolder">void   techBlog()   { //... }</span>. <span rel="license">All Rights Reserved</span>.</section>
          <section class="poweredby">Published with <a class="icon-ghost" href="http://hubpress.io">HubPress</a></section>
        </section>
        <section class="bottom">
          <section class="attribution">
            <a href="http://github.com/Reedyn/Saga">Built with <i class="fa fa-heart"></i> and Free and Open-Source Software</a>.
          </section>
        </section>
    </footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>
    <script src="//sgalles.github.io/themes/Saga/assets/js/scripts.js?v=1.0.0"></script>
    
</body>
</html>
